{"version":3,"file":"web-CAjwG-Lh.js","sources":["../src/js/version.js","../src/js/form.js","../node_modules/copy-text-to-clipboard/index.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n\tconst versionElement = document.getElementById(\"version\");\n\tconsole.log(versionElement);\n\t// console.log(PACKAGE_NAME_VERSION);\n\tversionElement.textContent = `${PACKAGE_NAME_VERSION.name}, v${PACKAGE_NAME_VERSION.version}`;\n});\n","// import copyTextToClipboard from \"@uiw/copy-to-clipboard\";\n\nimport copy from \"copy-text-to-clipboard\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\tconst formElement = document.getElementById(\"urlForm\");\n\tconst resultDebugElement = document.getElementById(\"result-debug\");\n\tconst resultMessageElement = document.getElementById(\"result-message\");\n\tconst resultDurationElement = document.getElementById(\"result-duration\");\n\tconst resultDurationCopiedElement = document.getElementById(\n\t\t\"result-duration-copied\",\n\t);\n\tconst resultDurationErrorElement = document.getElementById(\n\t\t\"result-message-error\",\n\t);\n\tconst inputUrlElement = document.getElementById(\"input-url\");\n\tconst switchDebugElement = document.getElementById(\"switch-debug\");\n\tconst buttonSubmitElement = document.getElementById(\"button-submit\");\n\tconst supportedDomainsListWrapElement = document.getElementById(\n\t\t\"supported-domains-list\",\n\t);\n\n\tconst supportedDomainsListElement = document.createElement(\"ul\");\n\n\t// Создаем три li и добавляем их в supportedDomainsListElement\n\twindow.SUPPORTED_DOMAINS_JSON.forEach((item) => {\n\t\tconst li = document.createElement(\"li\");\n\t\t// const proxy = item.proxy ? \"вкл\" : \"выкл\";\n\t\t// li.textContent = `Домен: ${item.domain} Прокси: ${proxy}`;\n\t\tli.textContent = `${item.domain}`;\n\t\tsupportedDomainsListElement.appendChild(li);\n\t});\n\n\t// console.log(supportedDomainsListWrapElement);\n\tsupportedDomainsListWrapElement.appendChild(supportedDomainsListElement);\n\n\tconst buttonSubmitText = buttonSubmitElement.textContent;\n\n\tif (!formElement) return;\n\n\tconst switchDebug = {\n\t\tset(str) {\n\t\t\tlocalStorage.setItem(\"switch-debug\", str);\n\t\t},\n\t\tget() {\n\t\t\treturn localStorage.getItem(\"switch-debug\");\n\t\t},\n\t};\n\n\tif (switchDebug.get() === \"on\") {\n\t\tswitchDebugElement.checked = true;\n\t} else {\n\t\tswitchDebugElement.checked = false;\n\t}\n\n\tswitchDebugElement.addEventListener(\"change\", (event) => {\n\t\tif (switchDebugElement.checked) {\n\t\t\tswitchDebug.set(\"on\");\n\t\t\tresultDebugElement.style.display = \"block\";\n\t\t} else {\n\t\t\tswitchDebug.set(\"off\");\n\t\t\tresultDebugElement.style.display = \"none\";\n\t\t}\n\t});\n\n\tconst actionProcessing = {\n\t\tactive() {\n\t\t\tinputUrlElement.setAttribute(\"disabled\", true);\n\t\t\tbuttonSubmitElement.setAttribute(\"disabled\", true);\n\t\t\tbuttonSubmitElement.setAttribute(\"aria-busy\", true);\n\t\t\tresultDurationElement.textContent = \"\";\n\t\t\tbuttonSubmitElement.textContent = \"Подождите\";\n\t\t\tresultDebugElement.textContent = \"\";\n\t\t\tresultMessageElement.style.display = \"none\";\n\t\t\tresultDurationCopiedElement.style.visibility = \"hidden\";\n\t\t\tresultDurationElement.style.visibility = \"hidden\";\n\t\t\tresultDurationErrorElement.style.display = \"none\";\n\t\t\tresultDurationErrorElement.textContent = \"\";\n\t\t},\n\t\tinactive() {\n\t\t\tinputUrlElement.removeAttribute(\"disabled\");\n\t\t\tbuttonSubmitElement.removeAttribute(\"disabled\");\n\t\t\tbuttonSubmitElement.removeAttribute(\"aria-busy\");\n\t\t\tbuttonSubmitElement.textContent = buttonSubmitText;\n\t\t},\n\t\tshowResults() {\n\t\t\tresultDurationElement.style.visibility = \"visible\";\n\t\t\tresultMessageElement.style.display = \"flex\";\n\t\t\tresultDurationErrorElement.style.display = \"none\";\n\t\t\tresultDurationErrorElement.textContent = \"\";\n\t\t},\n\t};\n\n\tformElement.addEventListener(\"submit\", async (e) => {\n\t\te.preventDefault();\n\t\tconst payload = {\n\t\t\turl: formElement.querySelector(\"[name=url]\").value,\n\t\t};\n\n\t\ttry {\n\t\t\tactionProcessing.active();\n\t\t\tconst res = await fetch(\"/api/check\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\tbody: JSON.stringify(payload),\n\t\t\t});\n\n\t\t\tconst result = await res.json();\n\n\t\t\tconsole.log(result);\n\t\t\tif (switchDebug.get() === \"on\") {\n\t\t\t\tresultDebugElement.textContent = JSON.stringify(result, null, 2);\n\t\t\t}\n\t\t\tactionProcessing.inactive();\n\n\t\t\tif (result.status === \"error\") {\n\t\t\t\t// console.log(resultDurationErrorElement);\n\t\t\t\tresultDurationErrorElement.style.display = \"inline-block\";\n\t\t\t\t// resultDurationErrorElement.setAttribute(\"aria-invalid\", true);\n\t\t\t\tresultDurationErrorElement.textContent = result.message;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (result.status === \"success\") {\n\t\t\t\tactionProcessing.showResults();\n\t\t\t}\n\n\t\t\tresultDurationElement.textContent = result.duration;\n\n\t\t\tresultDurationElement.addEventListener(\"click\", () => {\n\t\t\t\tconst resultDurationElement =\n\t\t\t\t\tdocument.getElementById(\"result-duration\");\n\n\t\t\t\tconst success = copy(resultDurationElement.textContent);\n\n\t\t\t\tif (!success) return;\n\n\t\t\t\t// перезапуск blink (важно!)\n\t\t\t\tresultDurationElement.classList.remove(\"blink\");\n\t\t\t\tvoid resultDurationElement.offsetWidth; // forced reflow — иначе анимация не перезапустится\n\t\t\t\tresultDurationElement.classList.add(\"blink\");\n\n\t\t\t\tif (success) console.log(\"Скопировано!\");\n\t\t\t\tresultDurationCopiedElement.style.visibility = \"visible\";\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresultDurationCopiedElement.style.visibility = \"hidden\";\n\t\t\t\t}, 3000);\n\t\t\t});\n\t\t} catch {\n\t\t\tactionProcessing.inactive();\n\t\t\tif (switchDebug.get() === \"on\") {\n\t\t\t\tresultDebugElement.textContent = \"Ошибка\";\n\t\t\t}\n\t\t}\n\t});\n});\n","export default function copyTextToClipboard(text, {target = document.body} = {}) {\n\tif (typeof text !== 'string') {\n\t\tthrow new TypeError(`Expected parameter \\`text\\` to be a \\`string\\`, got \\`${typeof text}\\`.`);\n\t}\n\n\tconst element = document.createElement('textarea');\n\tconst previouslyFocusedElement = document.activeElement;\n\n\telement.value = text;\n\n\t// Prevent keyboard from showing on mobile\n\telement.setAttribute('readonly', '');\n\n\t// Reset all inherited styles to prevent CSS interference\n\telement.style.all = 'unset';\n\n\t// Apply minimal required styles\n\telement.style.contain = 'strict';\n\telement.style.position = 'absolute';\n\telement.style.left = '-9999px';\n\telement.style.width = '2em';\n\telement.style.height = '2em';\n\telement.style.padding = '0';\n\telement.style.border = 'none';\n\telement.style.outline = 'none';\n\telement.style.boxShadow = 'none';\n\telement.style.background = 'transparent';\n\telement.style.fontSize = '12pt'; // Prevent zooming on iOS\n\telement.style.whiteSpace = 'pre'; // Preserve whitespace (tabs, spaces, newlines)\n\n\tconst selection = document.getSelection();\n\tconst originalRange = selection.rangeCount > 0 && selection.getRangeAt(0);\n\n\ttarget.append(element);\n\telement.select();\n\n\t// Explicit selection workaround for iOS\n\telement.selectionStart = 0;\n\telement.selectionEnd = text.length;\n\n\tlet isSuccess = false;\n\ttry {\n\t\tisSuccess = document.execCommand('copy');\n\t} catch {}\n\n\telement.remove();\n\n\tif (originalRange) {\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(originalRange);\n\t}\n\n\t// Get the focus back on the previously focused element, if any\n\tif (previouslyFocusedElement) {\n\t\tpreviouslyFocusedElement.focus();\n\t}\n\n\treturn isSuccess;\n}\n"],"names":["__vite_legacy_guard","url","import","catch","next","document","addEventListener","versionElement","getElementById","console","log","textContent","concat","PACKAGE_NAME_VERSION","name","version","formElement","resultDebugElement","resultMessageElement","resultDurationElement","resultDurationCopiedElement","resultDurationErrorElement","inputUrlElement","switchDebugElement","buttonSubmitElement","supportedDomainsListWrapElement","supportedDomainsListElement","createElement","window","SUPPORTED_DOMAINS_JSON","forEach","item","li","domain","appendChild","buttonSubmitText","switchDebug","set","str","localStorage","setItem","get","getItem","checked","event","style","display","actionProcessing","active","setAttribute","visibility","inactive","removeAttribute","showResults","async","e","preventDefault","payload","querySelector","value","res","fetch","method","headers","body","JSON","stringify","result","json","status","message","duration","success","text","target","TypeError","element","previouslyFocusedElement","activeElement","all","contain","position","left","width","height","padding","border","outline","boxShadow","background","fontSize","whiteSpace","selection","getSelection","originalRange","rangeCount","getRangeAt","append","select","selectionStart","selectionEnd","length","isSuccess","execCommand","remove","removeAllRanges","addRange","focus","copy","classList","offsetWidth","add","setTimeout"],"mappings":"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","x_google_ignoreList":[2]}