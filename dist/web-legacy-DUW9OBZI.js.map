{"version":3,"file":"web-legacy-DUW9OBZI.js","sources":["../node_modules/copy-text-to-clipboard/index.js","../src/js/version.js","../src/js/form.js"],"sourcesContent":["export default function copyTextToClipboard(text, {target = document.body} = {}) {\n\tif (typeof text !== 'string') {\n\t\tthrow new TypeError(`Expected parameter \\`text\\` to be a \\`string\\`, got \\`${typeof text}\\`.`);\n\t}\n\n\tconst element = document.createElement('textarea');\n\tconst previouslyFocusedElement = document.activeElement;\n\n\telement.value = text;\n\n\t// Prevent keyboard from showing on mobile\n\telement.setAttribute('readonly', '');\n\n\t// Reset all inherited styles to prevent CSS interference\n\telement.style.all = 'unset';\n\n\t// Apply minimal required styles\n\telement.style.contain = 'strict';\n\telement.style.position = 'absolute';\n\telement.style.left = '-9999px';\n\telement.style.width = '2em';\n\telement.style.height = '2em';\n\telement.style.padding = '0';\n\telement.style.border = 'none';\n\telement.style.outline = 'none';\n\telement.style.boxShadow = 'none';\n\telement.style.background = 'transparent';\n\telement.style.fontSize = '12pt'; // Prevent zooming on iOS\n\telement.style.whiteSpace = 'pre'; // Preserve whitespace (tabs, spaces, newlines)\n\n\tconst selection = document.getSelection();\n\tconst originalRange = selection.rangeCount > 0 && selection.getRangeAt(0);\n\n\ttarget.append(element);\n\telement.select();\n\n\t// Explicit selection workaround for iOS\n\telement.selectionStart = 0;\n\telement.selectionEnd = text.length;\n\n\tlet isSuccess = false;\n\ttry {\n\t\tisSuccess = document.execCommand('copy');\n\t} catch {}\n\n\telement.remove();\n\n\tif (originalRange) {\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(originalRange);\n\t}\n\n\t// Get the focus back on the previously focused element, if any\n\tif (previouslyFocusedElement) {\n\t\tpreviouslyFocusedElement.focus();\n\t}\n\n\treturn isSuccess;\n}\n","document.addEventListener(\"DOMContentLoaded\", () => {\n\tconst versionElement = document.getElementById(\"version\");\n\tconsole.log(versionElement);\n\t// console.log(PACKAGE_NAME_VERSION);\n\tversionElement.textContent = `${PACKAGE_NAME_VERSION.name}, v${PACKAGE_NAME_VERSION.version}`;\n});\n","// import copyTextToClipboard from \"@uiw/copy-to-clipboard\";\n\nimport copy from \"copy-text-to-clipboard\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\tconst formElement = document.getElementById(\"urlForm\");\n\tconst resultDebugElement = document.getElementById(\"result-debug\");\n\tconst resultMessageElement = document.getElementById(\"result-message\");\n\tconst resultDurationElement = document.getElementById(\"result-duration\");\n\tconst resultDurationCopiedElement = document.getElementById(\n\t\t\"result-duration-copied\",\n\t);\n\tconst resultDurationErrorElement = document.getElementById(\n\t\t\"result-message-error\",\n\t);\n\tconst inputUrlElement = document.getElementById(\"input-url\");\n\tconst switchDebugElement = document.getElementById(\"switch-debug\");\n\tconst buttonSubmitElement = document.getElementById(\"button-submit\");\n\tconst supportedDomainsListWrapElement = document.getElementById(\n\t\t\"supported-domains-list\",\n\t);\n\n\tconst supportedDomainsListElement = document.createElement(\"ul\");\n\n\t// Создаем три li и добавляем их в supportedDomainsListElement\n\twindow.SUPPORTED_DOMAINS_JSON.forEach((item) => {\n\t\tconst li = document.createElement(\"li\");\n\t\t// const proxy = item.proxy ? \"вкл\" : \"выкл\";\n\t\t// li.textContent = `Домен: ${item.domain} Прокси: ${proxy}`;\n\t\tli.textContent = `${item.domain}`;\n\t\tsupportedDomainsListElement.appendChild(li);\n\t});\n\n\t// console.log(supportedDomainsListWrapElement);\n\tsupportedDomainsListWrapElement.appendChild(supportedDomainsListElement);\n\n\tconst buttonSubmitText = buttonSubmitElement.textContent;\n\n\tif (!formElement) return;\n\n\tconst switchDebug = {\n\t\tset(str) {\n\t\t\tlocalStorage.setItem(\"switch-debug\", str);\n\t\t},\n\t\tget() {\n\t\t\treturn localStorage.getItem(\"switch-debug\");\n\t\t},\n\t};\n\n\tif (switchDebug.get() === \"on\") {\n\t\tswitchDebugElement.checked = true;\n\t} else {\n\t\tswitchDebugElement.checked = false;\n\t}\n\n\tswitchDebugElement.addEventListener(\"change\", (event) => {\n\t\tif (switchDebugElement.checked) {\n\t\t\tswitchDebug.set(\"on\");\n\t\t\tresultDebugElement.style.display = \"block\";\n\t\t} else {\n\t\t\tswitchDebug.set(\"off\");\n\t\t\tresultDebugElement.style.display = \"none\";\n\t\t}\n\t});\n\n\tconst actionProcessing = {\n\t\tactive() {\n\t\t\tinputUrlElement.setAttribute(\"disabled\", true);\n\t\t\tbuttonSubmitElement.setAttribute(\"disabled\", true);\n\t\t\tbuttonSubmitElement.setAttribute(\"aria-busy\", true);\n\t\t\tresultDurationElement.textContent = \"\";\n\t\t\tbuttonSubmitElement.textContent = \"Подождите\";\n\t\t\tresultDebugElement.textContent = \"\";\n\t\t\tresultMessageElement.style.display = \"none\";\n\t\t\tresultDurationCopiedElement.style.visibility = \"hidden\";\n\t\t\tresultDurationElement.style.visibility = \"hidden\";\n\t\t\tresultDurationErrorElement.style.display = \"none\";\n\t\t\tresultDurationErrorElement.textContent = \"\";\n\t\t},\n\t\tinactive() {\n\t\t\tinputUrlElement.removeAttribute(\"disabled\");\n\t\t\tbuttonSubmitElement.removeAttribute(\"disabled\");\n\t\t\tbuttonSubmitElement.removeAttribute(\"aria-busy\");\n\t\t\tbuttonSubmitElement.textContent = buttonSubmitText;\n\t\t},\n\t\tshowResults() {\n\t\t\tresultDurationElement.style.visibility = \"visible\";\n\t\t\tresultMessageElement.style.display = \"flex\";\n\t\t\tresultDurationErrorElement.style.display = \"none\";\n\t\t\tresultDurationErrorElement.textContent = \"\";\n\t\t},\n\t};\n\n\tformElement.addEventListener(\"submit\", async (e) => {\n\t\te.preventDefault();\n\t\tconst payload = {\n\t\t\turl: formElement.querySelector(\"[name=url]\").value,\n\t\t};\n\n\t\ttry {\n\t\t\tactionProcessing.active();\n\t\t\tconst res = await fetch(\"/api/check\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\tbody: JSON.stringify(payload),\n\t\t\t});\n\n\t\t\tconst result = await res.json();\n\n\t\t\tconsole.log(result);\n\t\t\tif (switchDebug.get() === \"on\") {\n\t\t\t\tresultDebugElement.textContent = JSON.stringify(result, null, 2);\n\t\t\t}\n\t\t\tactionProcessing.inactive();\n\n\t\t\tif (result.status === \"error\") {\n\t\t\t\t// console.log(resultDurationErrorElement);\n\t\t\t\tresultDurationErrorElement.style.display = \"inline-block\";\n\t\t\t\t// resultDurationErrorElement.setAttribute(\"aria-invalid\", true);\n\t\t\t\tresultDurationErrorElement.textContent = result.message;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (result.status === \"success\") {\n\t\t\t\tactionProcessing.showResults();\n\t\t\t}\n\n\t\t\tresultDurationElement.textContent = result.duration;\n\n\t\t\tresultDurationElement.addEventListener(\"click\", () => {\n\t\t\t\tconst resultDurationElement =\n\t\t\t\t\tdocument.getElementById(\"result-duration\");\n\n\t\t\t\tconst success = copy(resultDurationElement.textContent);\n\n\t\t\t\tif (!success) return;\n\n\t\t\t\t// перезапуск blink (важно!)\n\t\t\t\tresultDurationElement.classList.remove(\"blink\");\n\t\t\t\tvoid resultDurationElement.offsetWidth; // forced reflow — иначе анимация не перезапустится\n\t\t\t\tresultDurationElement.classList.add(\"blink\");\n\n\t\t\t\tif (success) console.log(\"Скопировано!\");\n\t\t\t\tresultDurationCopiedElement.style.visibility = \"visible\";\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresultDurationCopiedElement.style.visibility = \"hidden\";\n\t\t\t\t}, 3000);\n\t\t\t});\n\t\t} catch {\n\t\t\tactionProcessing.inactive();\n\t\t\tif (switchDebug.get() === \"on\") {\n\t\t\t\tresultDebugElement.textContent = \"Ошибка\";\n\t\t\t}\n\t\t}\n\t});\n});\n"],"names":["copyTextToClipboard","text","_ref$target","arguments","length","undefined","target","document","body","TypeError","concat","_typeof","element","createElement","previouslyFocusedElement","activeElement","value","setAttribute","style","all","contain","position","left","width","height","padding","border","outline","boxShadow","background","fontSize","whiteSpace","selection","getSelection","originalRange","rangeCount","getRangeAt","append","select","selectionStart","selectionEnd","isSuccess","execCommand","_unused","remove","removeAllRanges","addRange","focus","addEventListener","versionElement","getElementById","console","log","textContent","PACKAGE_NAME_VERSION","name","version","formElement","resultDebugElement","resultMessageElement","resultDurationElement","resultDurationCopiedElement","resultDurationErrorElement","inputUrlElement","switchDebugElement","buttonSubmitElement","supportedDomainsListWrapElement","supportedDomainsListElement","window","SUPPORTED_DOMAINS_JSON","forEach","item","li","domain","appendChild","buttonSubmitText","switchDebug","str","localStorage","setItem","getItem","checked","event","display","actionProcessing","visibility","removeAttribute","_ref2","_regenerator","m","_callee","e","payload","res","result","w","_context","p","n","preventDefault","url","querySelector","fetch","method","headers","JSON","stringify","v","json","status","message","a","duration","success","copy","classList","offsetWidth","add","setTimeout","_x","apply"],"mappings":"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","x_google_ignoreList":[0]}